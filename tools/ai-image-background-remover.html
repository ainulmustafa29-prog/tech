<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI Image Background Remover - Remove backgrounds from images with transparent output. Free online tool.">
    <title>AI Image Background Remover - AIVOROPRO</title>
    <link rel="icon" type="image/png" href="https://flexible-jade-j2fhsqcxkf.edgeone.app/icon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="header-placeholder"></div>

    <section class="tool-page">
        <div class="container">
            <div class="tool-container">
                <h1 class="tool-page-title">AI Image Background Remover</h1>
                <p class="tool-page-description">Remove backgrounds from your images with AI technology. Output will be transparent PNG format.</p>

                <div class="upload-area" id="uploadArea">
                    <i class="bi bi-cloud-upload upload-icon"></i>
                    <h3>Drag & Drop Your Image</h3>
                    <p>or click to browse</p>
                    <input type="file" id="fileInput" class="file-input" accept="image/*">
                    <button class="btn btn-upload" onclick="document.getElementById('fileInput').click()">Select Image</button>
                </div>

                <div class="preview-area" id="previewArea">
                    <img id="previewImage" class="preview-image" alt="Preview">
                    <button class="btn btn-process" id="processBtn">Remove Background</button>
                </div>

                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill">0%</div>
                </div>

                <div class="download-area" id="downloadArea">
                    <h4 class="text-center mb-3">Background Removed Successfully!</h4>
                    <img id="resultImage" class="preview-image" alt="Result" style="background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px;">
                    <a href="#" class="btn btn-download" id="downloadBtn" download>Download PNG</a>
                </div>
            </div>
        </div>
    </section>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/common.js"></script>
    <script>
        let selectedFile = null;
        let processedBlob = null;

        document.addEventListener('DOMContentLoaded', function() {
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const previewArea = document.getElementById('previewArea');
            const previewImage = document.getElementById('previewImage');
            const processBtn = document.getElementById('processBtn');

            initFileUpload(uploadArea, fileInput, previewArea, previewImage, function(file) {
                selectedFile = file;
            });

            processBtn.addEventListener('click', function() {
                if (selectedFile) {
                    processBackgroundRemoval(selectedFile);
                }
            });
        });

        function processBackgroundRemoval(file) {
            const progressBar = document.getElementById('progressBar');
            const progressFill = document.getElementById('progressFill');
            const processBtn = document.getElementById('processBtn');
            const downloadArea = document.getElementById('downloadArea');
            const resultImage = document.getElementById('resultImage');
            const downloadBtn = document.getElementById('downloadBtn');

            progressBar.classList.add('active');
            processBtn.disabled = true;

            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);

                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    const data = imageData.data;

                    // Simple background removal simulation (edge detection based)
                    // In production, this would use a proper AI model
                    for (let i = 0; i < data.length; i += 4) {
                        const r = data[i];
                        const g = data[i + 1];
                        const b = data[i + 2];
                        const avg = (r + g + b) / 3;
                        
                        // Simple threshold-based removal (simplified)
                        if (avg > 200 && Math.abs(r - g) < 30 && Math.abs(g - b) < 30) {
                            data[i + 3] = 0; // Make transparent
                        }
                    }

                    ctx.putImageData(imageData, 0, 0);

                    let progress = 0;
                    const interval = setInterval(() => {
                        progress += 10;
                        progressFill.style.width = progress + '%';
                        progressFill.textContent = progress + '%';

                        if (progress >= 100) {
                            clearInterval(interval);
                            canvas.toBlob(function(blob) {
                                processedBlob = blob;
                                const url = URL.createObjectURL(blob);
                                resultImage.src = url;
                                downloadBtn.href = url;
                                downloadBtn.download = 'no-background_' + file.name.replace(/\.[^/.]+$/, '') + '.png';
                                downloadArea.classList.add('active');
                                progressBar.classList.remove('active');
                                processBtn.disabled = false;
                            }, 'image/png', 1.0);
                        }
                    }, 100);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    </script>
</body>
</html>

